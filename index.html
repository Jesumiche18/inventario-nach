<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Inventario Rentable Nach</title>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f3f3f3;
      padding: 20px;
    }

    h1 {
      text-align: center;
      color: #2c3e50;
    }

    form, .buscador {
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      margin-bottom: 20px;
    }

    input, button {
      padding: 8px;
      margin: 5px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background: #fff;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

    th, td {
      padding: 10px;
      border: 1px solid #ccc;
      text-align: center;
    }

    tfoot {
      background: #ecf0f1;
      font-weight: bold;
    }

    .acciones button {
      margin-right: 5px;
      cursor: pointer;
    }
  </style>
</head>
<body>

  <h1>üì¶ Inventario Rentable Nach</h1>

  <form id="formulario">
    <input type="text" id="nombre" placeholder="Producto" required>
    <input type="number" id="cantidad" placeholder="Cantidad" required>
    <input type="number" id="costo" placeholder="Costo unitario" step="0.01" required>
    <input type="number" id="venta" placeholder="Precio de venta" step="0.01" required>
    <button type="submit">Agregar</button>
  </form>

  <div class="buscador">
    <input type="text" id="busqueda" placeholder="üîç Buscar producto...">
  </div>

  <table id="tabla">
    <thead>
      <tr>
        <th>Producto</th>
        <th>Cantidad</th>
        <th>Costo</th>
        <th>Venta</th>
        <th>Ganancia</th>
        <th>Acciones</th>
      </tr>
    </thead>
    <tbody></tbody>
    <tfoot>
      <tr>
        <td colspan="2">Totales:</td>
        <td id="totalCosto">$0.00</td>
        <td id="totalVenta">$0.00</td>
        <td id="totalGanancia">$0.00</td>
        <td></td>
      </tr>
    </tfoot>
  </table>

  <script>
    const formulario = document.getElementById('formulario');
    const tabla = document.querySelector('#tabla tbody');
    const buscador = document.getElementById('busqueda');
    let productos = [];

    formulario.addEventListener('submit', function(e) {
      e.preventDefault();
      const nombre = document.getElementById('nombre').value.trim();
      const cantidad = parseInt(document.getElementById('cantidad').value);
      const costo = parseFloat(document.getElementById('costo').value);
      const venta = parseFloat(document.getElementById('venta').value);

      productos.push({ nombre, cantidad, costo, venta });
      formulario.reset();
      renderTabla();
    });

    buscador.addEventListener('input', () => renderTabla());

    function renderTabla() {
      const filtro = buscador.value.toLowerCase();
      tabla.innerHTML = '';
      let totalCosto = 0, totalVenta = 0, totalGanancia = 0;

      productos.forEach((p, i) => {
        if (!p.nombre.toLowerCase().includes(filtro)) return;

        const gananciaUnit = p.venta - p.costo;
        const gananciaTotal = gananciaUnit * p.cantidad;

        totalCosto += p.costo * p.cantidad;
        totalVenta += p.venta * p.cantidad;
        totalGanancia += gananciaTotal;

        const fila = document.createElement('tr');
        fila.innerHTML = `
          <td>${p.nombre}</td>
          <td>${p.cantidad}</td>
          <td>$${(p.costo * p.cantidad).toFixed(2)}</td>
          <td>$${(p.venta * p.cantidad).toFixed(2)}</td>
          <td>$${gananciaTotal.toFixed(2)}</td>
          <td class="acciones">
            <button onclick="editar(${i})">‚úèÔ∏è</button>
            <button onclick="eliminar(${i})">üóëÔ∏è</button>
          </td>
        `;
        tabla.appendChild(fila);
      });

      document.getElementById('totalCosto').textContent = `$${totalCosto.toFixed(2)}`;
      document.getElementById('totalVenta').textContent = `$${totalVenta.toFixed(2)}`;
      document.getElementById('totalGanancia').textContent = `$${totalGanancia.toFixed(2)}`;
    }

    function eliminar(index) {
      if (confirm("¬øEliminar este producto?")) {
        productos.splice(index, 1);
        renderTabla();
      }
    }

    function editar(index) {
      const p = productos[index];
      document.getElementById('nombre').value = p.nombre;
      document.getElementById('cantidad').value = p.cantidad;
      document.getElementById('costo').value = p.costo;
      document.getElementById('venta').value = p.venta;
      productos.splice(index, 1);
      renderTabla();
    }
  </script>

</body>
</html>
